<div id="filters" class="space-y-6">
    <% @search.facets.each do |facet| %>
        <div class="facet-group">
            <h3 class="font-semibold text-gray-700 mb-2">
            <%= facet.name.to_s.titleize %>
            </h3>
            <div class="space-y-2">
            <% facet.rows.each do |row| %>
                <div class="flex items-center">
                <%= check_box_tag "#{facet.name}[]", 
                    row.value,
                    params[facet.name]&.include?(row.value),
                    {     
                        class: "mr-2",
                        onchange: "this.form.requestSubmit()",
                        form: form,
                        data: { turbo_action: "advance" }
                    }%>
                <%= label_tag "#{facet.name}_#{row.value}", 
                    "#{row.value} (#{row.count})",
                    class: "text-sm text-gray-600" %>
                </div>
            <% end %>
            </div>
        </div>
    <% end %>
</div>
